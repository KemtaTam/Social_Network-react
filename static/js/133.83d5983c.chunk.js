"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[133],{9133:function(e,t,s){s.r(t),s.d(t,{default:function(){return D}});var i=s(6871),o=s(2791),r=s(885),n=s(4959),a=s(8660),l={profile_additional:"ProfileData_profile_additional__ajPvc",profile_additional_kind:"ProfileData_profile_additional_kind__4aLCh",error:"ProfileData_error__mWE+r",errorMes:"ProfileData_errorMes__RkvEG",errorText:"ProfileData_errorText__RUp24"},c=s(184),u=function(e){var t=e.contactValue,s=e.title,i=e.contactTitle;return(0,c.jsx)("div",{children:t&&(0,c.jsx)("div",{className:l.contacts,children:s?i+":":t})})},p=function(e){var t=e.usersData,s=e.isOwner,i=e.editModeOn,o=Object.keys(t.contacts).map((function(e){return(0,c.jsx)(u,{contactTitle:e,contactValue:t.contacts[e],title:!0},e)})),r=Object.keys(t.contacts).map((function(e){return(0,c.jsx)(u,{contactTitle:e,contactValue:t.contacts[e],title:!1},e)}));return(0,c.jsxs)("div",{children:[s&&(0,c.jsx)("div",{children:(0,c.jsx)("button",{onClick:i,children:"Edit mode"})}),(0,c.jsxs)("div",{className:l.profile_additional,children:[(0,c.jsxs)("div",{className:l.profile_additional_kind,children:[(0,c.jsx)("div",{children:t.aboutMe&&"About:"}),(0,c.jsx)("div",{children:"Looking for a job:"}),o]}),(0,c.jsxs)("div",{className:l.profile_additional_value,children:[(0,c.jsx)("div",{children:t.aboutMe&&t.aboutMe}),(0,c.jsx)("div",{children:t.lookingForAJob?t.lookingForAJobDescription:"No"}),r]})]})]})},d=s(5705),_=s(4386),f=function(e){var t=e.usersData,s=e.setEditMode,i=(0,a.T)(),o=Object.keys(t.contacts).map((function(e){return(0,c.jsxs)("div",{children:[(0,c.jsx)(d.gN,{name:"contacts."+e,placeholder:e}),(0,c.jsx)(d.Bc,{className:l.errorMes,name:e,component:"div"})]},e)}));return(0,c.jsx)(d.J9,{initialValues:{userId:t.userId,photos:t.photos,aboutMe:t.aboutMe,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,fullName:t.fullName,contacts:{facebook:t.contacts.facebook,website:t.contacts.website,vk:t.contacts.vk,twitter:t.contacts.twitter,instagram:t.contacts.instagram,youtube:t.contacts.youtube,github:t.contacts.github,mainLink:t.contacts.mainLink}},validationSchema:_.Ry({}),onSubmit:function(e,t){var o=t.setSubmitting,r=t.setStatus;i((0,n.Ii)(e,r,s)),o(!1)},children:function(e){var t=e.isSubmitting,s=e.status;return(0,c.jsxs)(d.l0,{className:s&&l.error,children:[(0,c.jsx)("div",{className:l.errorText,children:s}),(0,c.jsxs)("div",{children:[(0,c.jsx)(d.gN,{name:"fullName",placeholder:"fullName"}),(0,c.jsx)(d.Bc,{className:l.errorMes,name:"fullName",component:"div"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(d.gN,{name:"aboutMe",as:"textarea",placeholder:"aboutMe"}),(0,c.jsx)(d.Bc,{className:l.errorMes,name:"aboutMe",component:"div"})]}),(0,c.jsxs)("div",{children:["lookingForAJob: ",(0,c.jsx)(d.gN,{name:"lookingForAJob",type:"checkbox"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(d.gN,{name:"lookingForAJobDescription",as:"textarea",placeholder:"lookingForAJobDescription"}),(0,c.jsx)(d.Bc,{className:l.errorMes,name:"lookingForAJobDescription",component:"div"})]}),"Contacts: ",(0,c.jsx)("br",{}),o,(0,c.jsx)("button",{type:"submit",disabled:t,children:"Save"})]})}})},m="ProfileStatus_status__9bSj3",x="ProfileStatus_non_owner_status__XU3uC",j=function(e){var t=e.status,s=e.isOwner,i=(0,o.useState)(!1),l=(0,r.Z)(i,2),u=l[0],p=l[1],d=(0,o.useState)(t),_=(0,r.Z)(d,2),f=_[0],j=_[1],h=(0,a.T)();(0,o.useEffect)((function(){j(t)}),[t]);var b=function(){s&&(p(!u),u&&h((0,n.Nf)(f)))};return(0,c.jsx)("div",{children:u?(0,c.jsx)("input",{onChange:function(e){j(e.currentTarget.value)},autoFocus:!0,onBlur:b,value:f}):(0,c.jsx)("div",{onClick:b,className:s?m:x,children:t||"status"})})},h=s(3328),b=s(2757),v={profile_wrapper:"ProfileInfo_profile_wrapper__6NeZa",profile_info_wrapper:"ProfileInfo_profile_info_wrapper__NYGTx",profile_wrapper_input:"ProfileInfo_profile_wrapper_input__pPQxm",profile_img:"ProfileInfo_profile_img__kRmuO",profile_name:"ProfileInfo_profile_name__8c61u",loadImg:"ProfileInfo_loadImg__1QzXN"},N=function(e){var t=e.isOwner,s=(0,o.useState)(!1),i=(0,r.Z)(s,2),l=i[0],u=i[1],d=(0,a.T)(),_=(0,a.C)((function(e){return e.profilePage})),m=_.usersData,x=_.status;if(!m)return(0,c.jsx)(h.Z,{});return(0,c.jsxs)("div",{className:v.profile_wrapper,children:[(0,c.jsxs)("div",{className:[v.profile_info_wrapper,t&&v.profile_wrapper_input].join(" "),children:[(0,c.jsx)("img",{className:v.profile_img,src:m.photos.small||b,alt:"ava"}),(0,c.jsxs)("div",{className:v.profile_info,children:[(0,c.jsx)("div",{className:v.profile_name,children:m.fullName}),(0,c.jsx)(j,{isOwner:t,status:x}),(0,c.jsx)("hr",{}),l?(0,c.jsx)(f,{usersData:m,setEditMode:u}):(0,c.jsx)(p,{usersData:m,isOwner:t,editModeOn:function(){return u(!0)}})]})]}),t&&(0,c.jsx)("input",{className:v.loadImg,type:"file",onChange:function(e){var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&d((0,n.Ju)(e.target.files[0]))}})]})},g={profile_posts:"Posts_profile_posts__IkAGr",profile_title:"Posts_profile_title__TejTU",profile_post:"Posts_profile_post__GW7C9",post_wrapper:"Posts_post_wrapper__muG4H",top_post_wrapper:"Posts_top_post_wrapper__eGYqx",post_text:"Posts_post_text__Ile3t",profile_new_post:"Posts_profile_new_post__Yq3hq",bPublish:"Posts_bPublish__h1PFT",likesCount:"Posts_likesCount__oDYVP",errorMes:"Posts_errorMes__VtrI5",bDel:"Posts_bDel__IiMy4"},k=function(e){var t=e.id,s=e.text,i=e.numOfLike,o=(0,a.T)();return(0,c.jsxs)("div",{className:g.profile_post,children:[(0,c.jsxs)("div",{className:g.post_wrapper,children:[(0,c.jsxs)("div",{className:g.top_post_wrapper,children:[(0,c.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTQblpU20ze2Vsusvi7MmRwzZYanB0cVwNJHg&usqp=CAU",alt:"ava"}),(0,c.jsx)("button",{className:g.bDel,onClick:function(){return o(n.Nw.delPost(t))},children:"X"})]}),(0,c.jsx)("div",{className:g.post_text,children:s})]}),(0,c.jsx)("button",{className:g.bLike,onClick:function(){return o(n.Nw.addLike(t))},children:"like"})," ",(0,c.jsx)("span",{className:g.likesCount,children:i})]})},w=function(){var e=(0,a.T)();return(0,c.jsx)(d.J9,{initialValues:{post:""},validationSchema:_.Ry({post:_.Z_().required("")}),onSubmit:function(t,s){var i=s.setSubmitting;e(n.Nw.addPost(t.post)),t.post="",i(!1)},children:function(e){var t=e.isSubmitting;return(0,c.jsx)(d.l0,{children:(0,c.jsxs)("div",{className:g.profile_new_post,children:[(0,c.jsx)(d.gN,{as:"textarea",cols:"50",rows:"3",name:"post",placeholder:"What's new?"}),(0,c.jsx)(d.Bc,{className:g.errorMes,name:"post",component:"div"}),(0,c.jsx)("button",{className:g.bPublish,type:"submit",disabled:t,children:"Publish"})]})})}})},P=o.memo((function(){var e=(0,a.C)((function(e){return e.profilePage})).postData.map((function(e){return(0,c.jsx)(k,{id:e.id,text:e.text,numOfLike:e.likesCount},e.id)})).reverse();return(0,c.jsx)("div",{className:g.profile_posts,children:(0,c.jsxs)("div",{className:g.posts_wrapper,children:[(0,c.jsx)(w,{}),e.length>0?(0,c.jsx)("div",{className:g.profile_title,children:"Publications"}):null,e]})})})),M={content:"Profile_content__W8sQJ",back_img:"Profile_back_img__NVu5A"},D=function(){var e=(0,a.C)((function(e){return e.profilePage})).isFetching,t=(0,a.C)((function(e){return e.auth})),s=t.isAuth,r=t.userId,l=(0,a.T)(),u=(0,i.UO)(),p=!u.userId;return(0,o.useEffect)((function(){var e=u.userId||r;e?(l((0,n.et)(+e)),l((0,n.lR)(+e))):console.warn("ID should exists in URI params or in state ('userIdURL')")}),[u,r]),(0,c.jsx)("section",{className:M.content,children:e?(0,c.jsx)(h.Z,{}):s?(0,c.jsxs)("div",{className:M.profile,children:[(0,c.jsx)(N,{isOwner:p}),(0,c.jsx)(P,{})]}):(0,c.jsx)(i.Fg,{to:"/login"})})}},2757:function(e,t,s){e.exports=s.p+"static/media/default.b8d16cb48a7cbc6e9d27.png"}}]);
//# sourceMappingURL=133.83d5983c.chunk.js.map