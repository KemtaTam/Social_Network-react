"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[553],{7553:function(e,t,s){s.r(t),s.d(t,{default:function(){return V}});var r=s(8683),i=s(5671),o=s(3144),a=s(136),n=s(3668),l=s(8687),c=s(2791),u=s(3101),p={profile_posts:"Posts_profile_posts__qAOeA",profile_title:"Posts_profile_title__DIkyk",profile_post:"Posts_profile_post__Z0zl7",post_wrapper:"Posts_post_wrapper__MypCM",top_post_wrapper:"Posts_top_post_wrapper__HjjlK",post_text:"Posts_post_text__P6V8O",profile_new_post:"Posts_profile_new_post__IG0MF",bPublish:"Posts_bPublish__IfkSq",likesCount:"Posts_likesCount__czkK+",errorMes:"Posts_errorMes__a1CiQ",bDel:"Posts_bDel__JFizj"},d=s(184),_=function(e){return(0,d.jsxs)("div",{className:p.profile_post,children:[(0,d.jsxs)("div",{className:p.post_wrapper,children:[(0,d.jsxs)("div",{className:p.top_post_wrapper,children:[(0,d.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTQblpU20ze2Vsusvi7MmRwzZYanB0cVwNJHg&usqp=CAU",alt:"ava"}),(0,d.jsx)("button",{className:p.bDel,onClick:function(){e.delPost(e.id)},children:"X"})]}),(0,d.jsx)("div",{className:p.post_text,children:e.text})]}),(0,d.jsx)("button",{className:p.bLike,onClick:function(){e.addLike(e.id)},children:"like"})," ",(0,d.jsx)("span",{className:p.likesCount,children:e.numOfLike})]})},f=s(5705),m=s(132),h=function(e){return(0,d.jsx)(f.J9,{initialValues:{post:""},validationSchema:m.Ry({post:m.Z_().required("")}),onSubmit:function(t,s){var r=s.setSubmitting;e.addPost(t.post),t.post="",r(!1)},children:function(e){var t=e.isSubmitting;return(0,d.jsx)(f.l0,{children:(0,d.jsxs)("div",{className:p.profile_new_post,children:[(0,d.jsx)(f.gN,{as:"textarea",cols:"50",rows:"3",name:"post",placeholder:"What's new?"}),(0,d.jsx)(f.Bc,{className:p.errorMes,name:"post",component:"div"}),(0,d.jsx)("button",{className:p.bPublish,type:"submit",disabled:t,children:"Publish"})]})})}})},x=c.memo((function(e){var t=e.postData.map((function(t){return(0,d.jsx)(_,(0,r.Z)({id:t.id,text:t.text,numOfLike:t.likesCount},e),t.id)})).reverse();return(0,d.jsx)("div",{className:p.profile_posts,children:(0,d.jsxs)("div",{className:p.posts_wrapper,children:[(0,d.jsx)(h,(0,r.Z)({},e)),t.length>0?(0,d.jsx)("div",{className:p.profile_title,children:"Publications"}):null,t]})})})),j=(0,l.$j)((function(e){return{postData:e.profilePage.postData}}),{addLike:u.dE,addPost:u.q2,delPost:u.r6})(x),v={content:"Profile_content__omOio",back_img:"Profile_back_img__u0wpT"},b=s(885),g=s(4904),k={profile_wrapper:"ProfileInfo_profile_wrapper__N7OSv",profile_info_wrapper:"ProfileInfo_profile_info_wrapper__pMowS",profile_wrapper_input:"ProfileInfo_profile_wrapper_input__24D+W",profile_img:"ProfileInfo_profile_img__w7LL-",profile_name:"ProfileInfo_profile_name__qyPy7",loadImg:"ProfileInfo_loadImg__rEPVL"},N=s(2757),P={profile_additional:"ProfileData_profile_additional__F56lW",profile_additional_kind:"ProfileData_profile_additional_kind__o5SfW",error:"ProfileData_error__wn8Ra",errorMes:"ProfileData_errorMes__AVWGF",errorText:"ProfileData_errorText__89V6A"},D=function(e){return(0,d.jsx)("div",{children:e.contactValue&&(0,d.jsx)("div",{className:P.contacts,children:e.title?e.contactTitle+":":e.contactValue})})},w=function(e){var t=Object.keys(e.usersData.contacts).map((function(t){return(0,d.jsx)(D,{contactTitle:t,contactValue:e.usersData.contacts[t],title:!0},t)})),s=Object.keys(e.usersData.contacts).map((function(t){return(0,d.jsx)(D,{contactTitle:t,contactValue:e.usersData.contacts[t],title:!1},t)}));return(0,d.jsxs)("div",{children:[e.isOwner&&(0,d.jsx)("div",{children:(0,d.jsx)("button",{onClick:e.editModeOn,children:"Edit mode"})}),(0,d.jsxs)("div",{className:P.profile_additional,children:[(0,d.jsxs)("div",{className:P.profile_additional_kind,children:[(0,d.jsx)("div",{children:e.usersData.aboutMe&&"About:"}),(0,d.jsx)("div",{children:"Looking for a job:"}),t]}),(0,d.jsxs)("div",{className:P.profile_additional_value,children:[(0,d.jsx)("div",{children:e.usersData.aboutMe&&e.usersData.aboutMe}),(0,d.jsx)("div",{children:e.usersData.lookingForAJob?e.usersData.lookingForAJobDescription:"No"}),s]})]})]})},Z=function(e){var t=Object.keys(e.usersData.contacts).map((function(e){return(0,d.jsxs)("div",{children:[(0,d.jsx)(f.gN,{name:"contacts."+e,placeholder:e}),(0,d.jsx)(f.Bc,{className:P.errorMes,name:e,component:"div"})]},e)}));return(0,d.jsx)(f.J9,{initialValues:{aboutMe:e.usersData.aboutMe,lookingForAJob:e.usersData.lookingForAJob,lookingForAJobDescription:e.usersData.lookingForAJobDescription,fullName:e.usersData.fullName,contacts:{facebook:e.usersData.contacts.facebook,website:e.usersData.contacts.website,vk:e.usersData.contacts.vk,twitter:e.usersData.contacts.twitter,instagram:e.usersData.contacts.instagram,youtube:e.usersData.contacts.youtube,github:e.usersData.contacts.github,mainLink:e.usersData.contacts.mainLink}},validationSchema:m.Ry({}),onSubmit:function(t,s){var r=s.setSubmitting,i=s.setStatus;console.log(JSON.stringify(t,null,2)),e.saveProfile(t,i,e.setEditMode),r(!1)},children:function(e){var s=e.isSubmitting,r=e.status;return(0,d.jsxs)(f.l0,{className:r&&P.error,children:[(0,d.jsx)("div",{className:P.errorText,children:r}),(0,d.jsxs)("div",{children:[(0,d.jsx)(f.gN,{name:"fullName",placeholder:"fullName"}),(0,d.jsx)(f.Bc,{className:P.errorMes,name:"fullName",component:"div"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(f.gN,{name:"aboutMe",as:"textarea",placeholder:"aboutMe"}),(0,d.jsx)(f.Bc,{className:P.errorMes,name:"aboutMe",component:"div"})]}),(0,d.jsxs)("div",{children:["lookingForAJob: ",(0,d.jsx)(f.gN,{name:"lookingForAJob",type:"checkbox"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(f.gN,{name:"lookingForAJobDescription",as:"textarea",placeholder:"lookingForAJobDescription"}),(0,d.jsx)(f.Bc,{className:P.errorMes,name:"lookingForAJobDescription",component:"div"})]}),"Contacts: ",(0,d.jsx)("br",{}),t,(0,d.jsx)("button",{type:"submit",disabled:s,children:"Save"})]})}})},M="ProfileStatus_status__7gNqT",y="ProfileStatus_non_owner_status__6gWwB",A=function(e){var t=(0,c.useState)(!1),s=(0,b.Z)(t,2),r=s[0],i=s[1],o=(0,c.useState)(e.status),a=(0,b.Z)(o,2),n=a[0],l=a[1];(0,c.useEffect)((function(){l(e.status)}),[e.status]);var u=function(){e.isOwner&&(i(!r),r&&e.updateStatus(n))};return(0,d.jsx)("div",{children:r?(0,d.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,onBlur:u,value:n}):(0,d.jsx)("div",{onClick:u,className:e.isOwner?M:y,children:e.status?e.status:"status"})})},S=function(e){var t=(0,c.useState)(!1),s=(0,b.Z)(t,2),i=s[0],o=s[1];if(!e.usersData)return(0,d.jsx)(g.Z,{});return(0,d.jsxs)("div",{className:k.profile_wrapper,children:[(0,d.jsxs)("div",{className:[k.profile_info_wrapper,e.isOwner&&k.profile_wrapper_input].join(" "),children:[(0,d.jsx)("img",{className:k.profile_img,src:e.usersData.photos.small||N,alt:"ava"}),(0,d.jsxs)("div",{className:k.profile_info,children:[(0,d.jsx)("div",{className:k.profile_name,children:e.usersData.fullName}),(0,d.jsx)(A,(0,r.Z)({},e)),(0,d.jsx)("hr",{}),i?(0,d.jsx)(Z,(0,r.Z)((0,r.Z)({},e),{},{setEditMode:o})):(0,d.jsx)(w,(0,r.Z)((0,r.Z)({},e),{},{editModeOn:function(){return o(!0)}}))]})]}),e.isOwner&&(0,d.jsx)("input",{className:k.loadImg,type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}})]})},F=function(e){return(0,d.jsx)("section",{className:v.content,children:(0,d.jsxs)("div",{className:v.profile,children:[(0,d.jsx)(S,(0,r.Z)({},e)),(0,d.jsx)(j,{store:e.store})]})})},I=s(6871);var C=s(7781),O=s(1548),J=function(e){(0,a.Z)(s,e);var t=(0,n.Z)(s);function s(){return(0,i.Z)(this,s),t.apply(this,arguments)}return(0,o.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.router.params.userId?this.props.router.params.userId:this.props.isAuthUserId;this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.router.params.userId!==e.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,d.jsx)("div",{children:this.props.isFetching?(0,d.jsx)(g.Z,{}):this.props.isAuth?(0,d.jsx)(F,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.router.params.userId})):(0,d.jsx)(I.Fg,{to:"/login"})})}}]),s}(c.Component),V=(0,C.qC)((function(e){return function(t){var s=(0,I.TH)(),i=(0,I.s0)(),o=(0,I.UO)();return(0,d.jsx)(e,(0,r.Z)((0,r.Z)({},t),{},{router:{location:s,navigate:i,params:o}}))}}),(0,l.$j)((function(e){return{usersData:e.profilePage.usersData,isFetching:e.profilePage.isFetching,status:e.profilePage.status,isAuth:e.auth.isAuth,isAuthUserId:e.auth.userId}}),{getUserProfile:u.et,getStatus:u.lR,updateStatus:u.Nf,savePhoto:u.Ju,saveProfile:u.Ii}),O.D)(J)},1548:function(e,t,s){s.d(t,{D:function(){return _}});var r=s(8683),i=s(5671),o=s(3144),a=s(136),n=s(3668),l=s(2791),c=s(8687),u=s(6871),p=s(184),d=function(e){return{isAuth:e.auth.isAuth}},_=function(e){var t=function(t){(0,a.Z)(l,t);var s=(0,n.Z)(l);function l(){return(0,i.Z)(this,l),s.apply(this,arguments)}return(0,o.Z)(l,[{key:"render",value:function(){return this.props.isAuth?(0,p.jsx)(e,(0,r.Z)({},this.props)):(0,p.jsx)(u.Fg,{to:"/login"})}}]),l}(l.Component);return(0,c.$j)(d)(t)}},2757:function(e,t,s){e.exports=s.p+"static/media/default.b8d16cb48a7cbc6e9d27.png"}}]);
//# sourceMappingURL=553.8744349f.chunk.js.map